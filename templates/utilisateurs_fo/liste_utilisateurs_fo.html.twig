{% extends 'base.html.twig' %}

{% block title %}{{ 'users_list'|trans }} | {{ parent() }}{% endblock %}

{% block body %}
	<h1>{{ 'users_list'|trans }}</h1>

	<table
		class="table table-hover text-center stretched-link-table-row"
        data-toggle="table"
        data-search="true"
	>
		<thead>
			<tr>
				<th data-sortable="true" class="text-left">{{ 'lastname'|trans }}</th>
				<th data-sortable="true" class="d-none d-md-table-cell">{{ 'firstname'|trans }}</th>
				<th class="d-none d-md-table-cell">{{ 'email'|trans }}</th>
				<th data-sortable="true" data-sorter="bySorterValue">{{ 'role'|trans }}</th>
				<th data-sortable="true" class="d-none d-md-table-cell">{{ 'status'|trans }}</th>
				<th data-sortable="true">{{ 'projects'|trans }}</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			{% for societeUser in societeUsers %}
				<tr class="{{ societeUser.enabled ? '' : 'text-muted' }}">
					<td class="text-left">{{ societeUser.user.nom }}</td>
					<td class="d-none d-md-table-cell">{{ societeUser.user.prenom }}</td>
					<td class="d-none d-md-table-cell">{{ societeUser.user.email }}</td>
					<td data-sorter-value="{{ societeUser.role }}">
						<span class="d-none d-sm-block">{{ societeUser.role|trans }}</span>
						<span class="d-sm-none">{{ (societeUser.role ~'.small')|trans }}</span>
					</td>
					<td class="d-none d-md-table-cell">{{ societeUser.statut|trans }}</td>
					<td>{{ societeUser.projetParticipants|length }}</td>
					<td class="d-flex justify-content-around">
						<a href="{{ path('app_fo_societe_user', { 'id': societeUser.id }) }}" class="stretched-link">
							<i class="fa fa-lg fa-eye"></i>
						</a>
						<a href="{{ path('app_fo_admin_utilisateur_modifier', { 'id': societeUser.id }) }}">
							<i class="fa fa-lg fa-edit"></i>
						</a>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	<div class="my-3 text-right">
		<a href="{{ path('app_fo_admin_user_invite') }}" class="btn btn-outline-primary">
			<i class="fa fa-user-plus" aria-hidden="true"></i>
			{{ 'invite_new_user'|trans }}
		</a>
	</div>

{% endblock %}
