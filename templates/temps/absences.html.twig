{% extends 'base.html.twig' %}

{% block title %}Mes absences{% endblock %}

{% block body %}

<h1>Indiquez vos jours d'absence</h1>

<h2 class="mb-4 align-items-center">
    <a href="{{ path('app_fo_absences', {'year': prev|date('Y'), 'month': prev|date('m')}) }}">
        <i class="fa fa-angle-left fa-lg"></i>
    </a>
    <span class="mx-3 text-month">
        {{ cra.mois|format_date(pattern='MMMM yyyy')|capitalize }}
    </span>
    <a href="{{ path('app_fo_absences', {'year': next|date('Y'), 'month': next|date('m')}) }}">
        <i class="fa fa-angle-right fa-lg"></i>
    </a>
</h2>

<div class="row">
    <div class="col-md-8 offset-md-2 col-lg-6 offset-lg-3">
        {% include 'temps/_info-validation.html.twig' with {
            'submitted': cra.isCraSubmitted,
            'modifiedAt': cra.craModifiedAt
        } %}

        {#
            Calendrier affiché temporairement en attendant le chargement des données
        #}
        <div class="calmonth">
            {% include 'temps/_calendrier_vide.html.twig' %}
        </div>
    </div>
</div>

<div class="d-flex justify-content-center mt-4">
    <button type="submit" class="btn btn-success btn-validate-cra my-3">Enregistrer</button>
</div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script type="text/javascript">
        const date = {{ {'year': mois|date('Y'), 'month': mois|date('m')}|json_encode|raw }};
        const craJours = {{ cra.jours|json_encode|raw }};

        initAbsences(date, craJours);
    </script>
{% endblock %}
