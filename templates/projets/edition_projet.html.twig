{% extends 'base.html.twig' %}

{% block title %}{{ "edit-of-project"|trans }} {{ projet.titre }} | {{ parent() }}{% endblock %}

{% block body %}

    <div class="row">
        <div class="col-lg-10 offset-lg-1">

            <h1>{{ "edit-of-project"|trans }} {{ projet.acronyme }}</h1>

            <a class="d-block mb-4" href="{{ path('app_fo_projet', {id: projet.id}) }}">
                <i class="fa fa-chevron-left" aria-hidden="true"></i>
                {{ "go-back-go-project"|trans }}
            </a>

            {{ form_start(form) }}
            {{ form_errors(form) }}

            <div class="row">
                <div class="col-sm-8">
                    {{ form_row(form.titre) }}
                </div>
                <div class="col-sm-4">
                    {{ form_row(form.acronyme) }}
                </div>
                <div class="col-md-12">
                    {{ form_label(form.colorCode) }}
                    <div class="row">
                        <div class="col-12 d-flex flex-row justify-content-center align-items-center">
                            {{ form_row(form.usedColorCodes) }}
                            {{ form_widget(form.colorCode) }}
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    {{ form_errors(form.resume) }}
                    {{ form_row(form.resume) }}
                    <span id="custom_ckeditor_max_char" class="d-none"
                          data-limit="{{ userContext.societeUser.societe.faitMarquantMaxDesc }}"
                          data-limitBlocking="{{ userContext.societeUser.societe.faitMarquantMaxDescIsblocking }}"></span>

                </div>
            </div>

            <div class="d-md-flex justify-content-between mt-3">
                {{ form_row(form.dateDebut) }}
                {{ form_row(form.dateFin) }}
            </div>

            <div class="row mt-3">
                <div class="col-md-12">
                    <div class="form-group">
                        <div class="custom-control custom-switch">
                            <input type="checkbox" id="toggle_target_dossierFichierProjets"
                                   class="custom-control-input toggle-target"
                                   data-target="dossierFichierProjets" {% if projet.dossierFichierProjets|length > 0 %} checked {% endif %}>
                            <label class="switch-custom custom-control-label" for="toggle_target_dossierFichierProjets">
                                {{ "manage-file-project"|trans }}
                            </label>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 dossierFichierProjets"
                     style="{% if projet.dossierFichierProjets|length == 0 %} display: none; {% endif %}">
                    {{ form_row(form.dossierFichierProjets) }}

                    <button class="btn btn-outline-primary add-folder-file mb-4">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                        {{ 'add_folder_file_project'|trans }}
                    </button>
                </div>
                <div class="col-md-12">
                    <div class="form-group">
                        <div class="custom-control custom-switch">
                            <input type="checkbox" id="toggle_target_projetUrls"
                                   class="custom-control-input toggle-target"
                                   data-target="projetUrls" {% if projet.projetUrls|length > 0 %} checked {% endif %}>
                            <label class="switch-custom custom-control-label" for="toggle_target_projetUrls">
                                {{ "ext-link-project"|trans }}
                            </label>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 projetUrls"
                     style="{% if projet.projetUrls|length == 0 %} display: none; {% endif %}">
                    {{ form_row(form.projetUrls) }}

                    <button class="btn btn-outline-primary add-external-link mb-4">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                        {{ 'add_external_link'|trans }}
                    </button>
                </div>
                <div class="col-md-12">
                    {{ form_row(form.projetInterne) }}
                </div>
                <div class="col-md-12">
                    {{ form_row(form.projetPpp) }}
                </div>
                <div class="col-md-12">
                    {{ form_row(form.projetCollaboratif) }}
                </div>
            </div>

            <div class="text-center">
                {{ form_row(form.submit, { 'label' : bouton }) }}
            </div>

            {{ form_end(form) }}
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4 offset-lg-2">
            <div class="card border-danger mb-3">
                <div class="card-body text-danger">
                    <h5 class="card-title">{{ 'delete_project_title'|trans({'projectAcronyme': projet.acronyme}) }}</h5>
                    <p class="card-text">
                        {{ 'delete_project_link_description'|trans }}
                        <a
                                href="{{ path('app_fo_projet_delete', {'id': projet.id}) }}"
                                class="btn btn-danger mt-4 btn-block"
                        >{{ 'verify_and_delete_project'|trans }}</a>
                    </p>
                </div>
            </div>
        </div>
        {% if projet.isSuspended %}
            <div class="col-lg-4">
                <div class="card border-success mb-3">
                    <div class="card-body text-success">
                        <h5 class="card-title">{{ 'resume_project_title'|trans({'projectAcronyme': projet.acronyme}) }}</h5>
                        <p class="card-text">
                            <a
                                    href="{{ path('app_fo_projet_resume', {'id': projet.id}) }}"
                                    class="btn btn-success mt-4 btn-block"
                            >{{ 'resume_project'|trans }}</a>
                        </p>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="col-lg-4">
                <div class="card border-warning mb-3">
                    <div class="card-body text-warning">
                        <h5 class="card-title">{{ 'suspend_project_title'|trans({'projectAcronyme': projet.acronyme}) }}</h5>
                        <p class="card-text">
                            <a
                                    href="{{ path('app_fo_projet_suspend', {'id': projet.id}) }}"
                                    class="btn btn-warning mt-4 btn-block"
                            >{{ 'suspend_project'|trans }}</a>
                        </p>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>


{% endblock %}
