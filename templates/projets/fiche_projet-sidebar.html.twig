<dl>
    {% if participation %}
        <p>Je suis <strong>{{ participation.role|trans }}</strong> sur ce projet.</p>
    {% else %}
        {# participation can be null when admin view a projet of his societe but without access #}
        <p>Vous n'avez <strong>pas de rôle</strong> sur ce projet.</p>
    {% endif %}

    {% if projet.projetUrls|length > 0 %}
        <ul class="list-unstyled">
            {% for projetUrl in projet.projetUrls %}
                <li class="text-truncate">
                    <i class="fa {{ projetUrl.url|faUrlIcon }}" aria-hidden="true"></i>
                    <a href="{{ projetUrl.url }}" target="_blank">{{ projetUrl.text|default(projetUrl.url) }}</a>
                </li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if projet.dateDebut %}
        <dt>Date de début</dt>
        <dd>{{ projet.dateDebut|format_date }}</dd>
    {% endif %}
    {% if projet.dateFin %}
        <dt>Date de fin</dt>
        <dd>{{ projet.dateFin|format_date }}</dd>
    {% endif %}
    <dt>Statut</dt>
    <dd>{{ projet.statut }}</dd>
</dl>

<hr>

{% if participation %}
    <div class="watch-projet" data-projet-id="{{ projet.id }}">
        {% if participation.watching %}
            <button class="btn btn-block btn-primary">
                <i class="fa fa-eye"></i>
                Suivre le projet
                <i class="fa fa-check"></i>
            </button>
        {% else %}
            <button class="btn btn-block btn-outline-primary">
                <i class="fa fa-eye"></i>
                Suivre le projet
            </button>
        {% endif %}

        <p class="text-muted">
            <small>
                Suivez ce projet pour recevoir une notification
                en temps réel à chaque mise à jour de ce projet.
            </small>
        </p>
    </div>
{% else %}
    <button class="btn btn-block btn-outline-primary" disabled>
        <i class="fa fa-eye"></i>
        Suivre le projet
    </button>
    <p class="text-muted">
        <small>
            Vous ne pouvez pas suivre ce projet
            car vous devez avoir au moins le rôle d'observateur sur ce projet.
        </small>
    </p>
{% endif %}

<hr>

<a
    href="{{ path('app_fo_projet_participant', {'id': projet.id}) }}"
    class="btn btn-outline-primary rounded-circle float-right {{ userCanEditProjet ? '' : 'disabled' }}"
    {% if not userCanEditProjet %}
        title="Seul le chef de projet peut gérer les participants"
    {% else %}
        title="Gérer les participants"
    {% endif %}
><i class="fa fa-cog"></i></a>

<h4>Contributeurs ({{ contributeurs|length }})</h4>

<ul class="list-inline">
    {% for contributeur in contributeurs %}
        <li class="list-inline-item m-1">
            <a href="{{ path('app_fo_societe_user', {'id': contributeur.societeUser.id}) }}">
                {% include 'utils/_avatar.html.twig' with {user: contributeur.societeUser.user} %}
            </a>
        </li>
    {% else %}
        <li>Il n'y a pas de contributeur pour l'instant.</li>
    {% endfor %}
</ul>

<button type="button" class="mt-3 btn btn-block btn-primary" data-toggle="modal" data-target="#exampleModal">
    Voir les observateurs
</button>

<hr>

<a
    href="{{ path('app_fo_projet_fichiers', {'id': projet.id}) }}"
    class="btn btn-outline-primary rounded-circle float-right {{ userCanAddFaitMarquant ? '' : 'disabled' }}"
    {% if not userCanAddFaitMarquant %}
        title="Seul les contributeurs peuvent ajouter un fichier"
    {% else %}
        title="Ajouter un fichier"
    {% endif %}
><i class="fa fa-upload" aria-hidden="true"></i>
</a>

<h4>Fichiers</h4>

{% if projet.fichierProjets|length > 0 %}
    
    <ul class="list-unstyled">
        {% for fichierProjet in projet.fichierProjets[0:5] %}
            <li>
                <a href="{{ path('app_fo_projet_fichier', {'projetId': projet.id, 'fichierProjetId': fichierProjet.id}) }}"
                        {% if fichierProjet.fichier|isImageFile %} miniature {% else %} title="{{ 'download'|trans }}" {% endif %}>
                    <i class="fa {{ fichierProjet|faFileIcon }}" aria-hidden="true"></i>
                    {{ fichierProjet.fichier.nomFichier }}
                </a>
            </li>
        {% endfor %}
    </ul>

    {% if projet.fichierProjets|length > 5 %}
        <p>et {{ projet.fichierProjets|length - 5 }} autres...</p>
    {% endif %}

    <a href="{{ path('app_fo_projet_fichiers', {'id': projet.id}) }}">Voir tous les fichiers</a>

{% else %}

<p class="text-muted">
    <small>
        Il n'y pas de fichier associé à ce projet.
    </small>
</p>

{% endif %}
