{% block temps_passe_row %}
    <div class="row mb-2 align-items-center">
        <div class="col text-right lead">
            <label for="{{ form.children.pourcentage.vars.id }}" class="m-0">
                Projet {{ form.vars.data.projet.acronyme }}
            </label>
        </div>
        <div class="col">
            {{ form_errors(form.children.pourcentage) }}
            <div class="input-group input-group-lg">
                {{ form_widget(form.children.pourcentage) }}
                <div class="input-group-append">
                    <span class="input-group-text">%</span>
                </div>
            </div>
        </div>
        <div class="col d-none d-sm-block">
        </div>
    </div>
{% endblock %}

{% block projet_participant_row %}
    <div class="row mb-5 mb-md-2 projet-participant-row">
        <div class="col-sm text-center text-sm-left">
            {{ form_widget(form.children.user) }}
            {{ form_errors(form.children.user) }}
        </div>
        <div class="col-sm">
            {{ form_errors(form.children.role) }}
            {{ form_widget(form.children.role) }}
        </div>
        <div class="col-sm-2 text-center">
            <button
                type="button"
                class="btn btn-outline-danger embed-form-remove"
            >&times;</button>
        </div>
    </div>
{% endblock %}

{% block fichier_projets_row %}
    {{ form_label(form) }}
    {{ form_errors(form) }}
    {{ form_help(form) }}

    <table class="table">
        <thead>
            <tr>
                <th>Fichier</th>
                <th>Auteur</th>
                <th><span class="d-none d-sm-table-cell">Date</span></th>
                <th></th>
            </tr>
        </thead>
        <tbody class="fichier-projets-container" data-prototype="{{ form_row(form.vars.prototype)|e }}">
            {{ form_widget(form) }}

            {% if is_granted(constant('App\\ProjetResourceInterface::CREATE'), form.vars.projet) %}
                <tr class="add-file-btn">
                    <td colspan="4">
                        <button class="btn btn-outline-primary" type="button">
                            <i class="fa fa-plus" aria-hidden="true"></i>
                            Ajouter un fichier
                        </button>
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
{% endblock %}

{% block fichier_projets_widget %}
    {{- block('form_rows') -}}
{% endblock %}

{% block fichier_projet_row %}
    <tr>
        {% if form.vars.data %}
            <td>
                <i class="fa {{ form.vars.data.fichier|faFileIcon }}" aria-hidden="true"></i>
                <a
                    href="{{ path('app_fo_projet_fichier', {
                        'projetId': form.vars.data.projet.id,
                        'fichierProjetId': form.vars.data.id
                    }) }}"
                >
                    {{ form_row(form.children.fichier) }}
                </a>
            </td>
            <td>{{ form.vars.data.uploadedBy.fullname }}</td>
            <td><span class="d-none d-sm-table-cell">{{ form.vars.data.fichier.dateUpload|format_date }}</span></td>
            <td>
                <a
                    href="{{ path('app_fo_projet_fichier_delete', {'projetId': form.vars.data.projet.id, 'fichierProjetId': form.vars.data.id}) }}"
                    class="btn btn-outline-danger btn-sm link-delete-file {% if not is_granted(constant('App\\ProjetResourceInterface::DELETE'), form.vars.data) %}disabled{% endif %}"
                    {% if not is_granted(constant('App\\ProjetResourceInterface::DELETE'), form.vars.data) %}
                        title="Vous ne pouvez pas supprimer les fichiers qui ne vous appartiennent pas"
                    {% endif %}
                >
                    <i class="fa fa-trash" aria-hidden="true"></i>
                </a>
            </td>
        {% else %}
            <td colspan="3" class="input-group-sm">{{ form_row(form.children.fichier) }}</td>
            <td>
                <button type="button" class="btn btn-sm btn-outline-danger remove-file-btn">
                    <i class="fa fa-trash" aria-hidden="true"></i>
                </button>
            </td>
        {% endif %}
    </tr>
{% endblock %}

{% block fichier_row %}
    {% if form.vars.data %}
        {{ form.vars.data.nomFichier }}
        <div class="d-none">
            {{ form_row(form) }}
        </div>
    {% else %}
        {{ form_widget(form) }}
    {% endif %}
{% endblock %}

{% block cron_schedule_row %}
    <div class="cron-schedule-input">
        {% if form.dayOfWeek is defined %}
            Le
            {{ form_widget(form.dayOfWeek) }}
        {% endif %}
        {% if form.dayOfMonth is defined %}
            Le
            {{ form_widget(form.dayOfMonth) }}
        {% endif %}
        à
        {{ form_widget(form.hour) }}
        h
        {{ form_widget(form.minute) }}
        min
    </div>
{% endblock %}

{% block cron_job_row %}
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">{{ form.vars.data.description }}</h5>
            <p>{{ form_help(form) }}</p>
            {{ form_widget(form) }}
            {{ form_errors(form) }}
            <br>
            {% if form.vars.data.id %}
                <small class="card-text"><a href="{{ path('app_fo_admin_notification_rapport', {'id': form.vars.data.id}) }}">Dernières notifications envoyées</a></small>
            {% else %}
                <small class="card-text text-muted">Notification encore jamais programmée</small>
            {% endif %}
        </div>
    </div>
{% endblock %}

{% block card_choice_widget %}
    <div class="card-group">
        {% for childForm in form.children %}
            <div class="card rdi-card-choice">
                <div class="card-body">
                    {% if faIcons[childForm.vars.value] is defined %}
                        <i class="fa {{ faIcons[childForm.vars.value] }}" aria-hidden="true"></i>
                    {% endif %}

                    {{ form_row(childForm) }}
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}
